<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>week-4-game</title>

<!-- Linking to Boostrap CDN -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Linking CSS -->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

<!-- Linking Font -->

	<link href="https://fonts.googleapis.com/css?family=Open+Sans|Poppins" rel="stylesheet">


<!-- JQuery -->
  	<script src="https://code.jquery.com/jquery.js"></script>


</head>


<body>


<div class="container">

	<div class="row">

		<div class="col-md-12">
				
				<div class="page-header">
  				<h1>Gem Jam!</h1>
				</div>

	    
		</div>

	</div>



	<div class="row">

		<div class="col-md-8">


			<div class="row">

				<p class="col-md-12">Match the target score to win a gem!</p>

			</div>

			<div class="row top-buffer" id="setTarget">

				<p class="col-md-12">Insert target score here</p>

			</div>

			<div class="row top-buffer" id="gameCounter">

				<p class="col-md-12">Insert game counter here</p>

			</div>

	    	<div class="row top-buffer" id="gemImages">

				<p class="col-md-12">Insert gem images here</p>

			</div>

			<div class="row top-buffer" id="winlossMessage">

				<p class="col-md-12">Insert win/loss message here</p>

			</div>
			
		</div>

		
	    
	    <div class="col-md-4">

	    	<div class="row" id="gemBox">

				<p class="col-md-12">My Gem Collection</p>

			</div>

		</div>


</div>

	<footer class="footer">
      	<div class="container">
        	<p class="text-muted"><br>Copyright &copy; 2017 Kimberly Harrod</p>
      	</div>
    </footer> 


<script type="text/javascript">

$(document).ready(function(){

	// Array of possible gems //
		var gem = ["agate", "amethyst", "aragonite", "azurite", "celestine", "crystal", "fluorite", "gypsum", "jade", "olivine", "onyx", "quartz", "rhodochrosite", "rose", "unakite"];

	// Set variables for the arrays of game gems and gem values

		var gameGems = [];
		var gemValues = [];
		var gemPick = "";
		var clickValue = "";
		var counter = 0;


	// Generate a random target score between 19 and 120 to start the game //


		var targetScore = Math.floor((Math.random() * 101) +19);
		$("#setTarget").html(targetScore);
		console.log(targetScore);


	//Choose four gems randomly from the gem array

	while (gameGems.length < 4) {
		var gemPick = gem[Math.floor(Math.random() * gem.length)];

			// If the gem hasn't already been chosen, then push it into the game gem array

			if (gameGems.indexOf(gemPick) === -1) {
				gameGems.push(gemPick);
			}
			
			console.log(gemPick);
		}

	// Display the game gem images by appending each one into the gem images div. Add a class that allows for a click event 

	for (var i = 0; i < 4; i++) {
	
		var imageUrl = "<img class='gem_image' src='assets/images/" + gameGems[i] + ".png'> ";
		$("#gemImages").append(imageUrl);

		}						 
	

	// Choose a value for each game gem between 1 and 12 

	while (gemValues.length < 4) {
		var clickValue = Math.floor(Math.random() * 12);

	// Each gem should have a unique value; if the random value generated has not been used, push it into the gem value array

		if (gemValues.indexOf(clickValue) === -1) {
			gemValues.push(clickValue);
		}

	}

	console.log(gemValues);


	// Create function - for each click on a gem image, we are looking up the value of that gem, and adding that value to the counter.

	function gemClicked () {

		// First, extract the gem name from the source attribute, i.e. the path to the gem image. To do this, split the file path up into elements of an array. The last element will be the file name. 

		var sourceAttribute = $(this).attr("src");
		var gemName = sourceAttribute.split('\\').pop().split('/').pop();

		// Finally, strip off the image file name extension (in this case .png)

		gemName = gemName.slice(0, -4);

		// Using the gem name, look up the position of the gem by querying its array index

		var gemIndex = gameGems.indexOf(gemName);
		

		// Then use the array index to look up the gem click value for that position, which will be used to increment the counter during game play

		var myValue = gemValues[gemIndex];

		// When the player clicks on a gem, the hidden value increments the counter

		counter += myValue;

		// The counter display is then updated

		$("#gameCounter").text(counter);

		// Checks for win (counter equals target score) or loss (counter exceeds target score)

		if (counter === targetScore) {
			$("#winlossMessage").text("You win!");
		}

		if (counter > targetScore) {
			$("#winlossMessage").text("You went over - you lose.");
		}

	}

		// Set the click event for the gem images on the page


		$(".gem_image").click(gemClicked);

		

	


	
	


	   
	   

	   	var gameOver = 1;


});

</script>

</body>

</html>